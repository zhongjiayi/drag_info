<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Using Drag and Drop API to copy and move elements</title>

    <style>
      div {
        margin: 0em;
        padding: 2em;
      }
      #src_copy,
      #src_move {
        color: blue;
        border: 5px solid black;
        width: 300px;
        height: 50;
      }
      #dest_copy,
      #dest_move {
        border: 5px solid blue;
        width: 300px;
        height: 50;
      }
    </style>
    <script>
      function dragstart_handler(ev) {
        console.log("dragStart");
        ev.currentTarget.style.border = "dashed";
        ev.dataTransfer.setData("text", ev.target.id);
        ev.effectAllowed = "copyMove";
      }
      function dragover_handler(ev) {
        console.log("dragOver");
        ev.currentTarget.style.background = "lightblue";
        ev.preventDefault();
      }
      function drop_handler(ev) {
        console.log("Drop");
        ev.preventDefault();
        var id = ev.dataTransfer.getData("text");
        if (id == "src_move" && ev.target.id == "dest_move")
          ev.target.appendChild(document.getElementById(id));
        if (id == "src_copy" && ev.target.id == "dest_copy") {
          var nodeCopy = document.getElementById(id).cloneNode(true);
          nodeCopy.id = "newId";
          ev.target.appendChild(nodeCopy);
        }
      }
      function dragend_handler(ev) {
        console.log("dragEnd");
        // Restore source's border
        ev.target.style.border = "solid black";
        // Remove all of the drag data
        ev.dataTransfer.clearData();
      }
    </script>
  </head>
  <body>
    <h1>
      Drag and Drop: Copy and Move elements with <code>DataTransfer</code>
    </h1>
    <div
      draggable="true"
      id="src_copy"
      ondragstart="dragstart_handler(event);"
      ondragend="dragend_handler(event);"
    >
      Select this element and drag to the <strong>Copy Drop Zone</strong>.
    </div>
    <div
      id="dest_copy"
      ondrop="drop_handler(event);"
      ondragover="dragover_handler(event);"
    >
      <strong>Copy Drop Zone</strong>
    </div>
    <div
      draggable="true"
      id="src_move"
      ondragstart="dragstart_handler(event);"
      ondragend="dragend_handler(event);"
    >
      Select this element and drag to the <strong>Move Drop Zone</strong>.
    </div>
    <div
      id="dest_move"
      ondrop="drop_handler(event);"
      ondragover="dragover_handler(event);"
    >
      <strong>Move Drop Zone</strong>
    </div>
  </body>
</html>
